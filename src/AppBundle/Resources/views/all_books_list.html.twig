{% extends 'base.html.twig' %}

{#{% block stylesheets %}#}
    {#<link rel="stylesheet" href="{{ asset('vendor/bootstrap/css/bootstrap.min.css') }}">#}
    {#<link rel="stylesheet" href="{{ asset('css/styles.css') }}">#}
    {#<link rel="stylesheet" href="{{ asset('vendor/fontawesome/css/font-awesome.min.css') }}">#}
    {#<link rel="stylesheet" href="{{ asset('assets/vendor/dropzone/dist/min/dropzone.min.css') }}">#}
    {#<link rel="stylesheet" href="{{ asset('https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css')}}">#}
{#{% endblock %}#}

{% block title %}Book list {% endblock %}

{% block body %}
    <h1 class="page-header text-center">
        Books List
    </h1>

    {% set no = 1 %}

        {#<form>#}
            {#<input name="q" type="search">#}
            {#<input type="submit" value="Find">#}
        {#</form>#}

    {#{% for books in book %}#}
    {#{% block stylesheets %}#}
        {#<link href="{{ asset(asset('https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css')) }}" type="text/css" rel="stylesheet" />#}
    {#<div data-role="main" class="ui-content">#}
    {#<div data-role="collapsible">#}
    {#<h1>Expand filter</h1>#}
    {#<div class="container">#}
    {#<div class="row">#}
    {#<form>#}
        {#Title:<br>#}
        {#<input name="t" type="Title">#}
        {#<br>#}
        {#Author:<br>#}
        {#<input name="a" type="Author">#}
        {#<br>#}
        {#Release year:<br>#}
        {#<input name="r" type="Release year">#}
        {#<br>#}
        {#Publisher:<br>#}
        {#<input name="p" type="Publisher">#}
        {#<br>#}
        {#Genre:<br>#}
        {#<input name="g" type="Genre">#}
        {#<br>#}
        {#Language:<br>#}
        {#<input name="l" type="Language">#}
        {#<br>#}
        {#Pages number:<br>#}
        {#<input name="pn" type="Pages number">#}
        {#<input type="submit" value="Filter">#}
        {#<br>#}
    {#</form>#}
    {#</div>#}
    {#</div>#}
    {#</div>#}
    {#</div>#}
        {#{% endblock %}#}
    {#{{ form_start(form, {#}
        {#'attr': {'class': 'navbar-form navbar-right', 'action': path('handleSearch')}#}
    {#}) }}#}

    {#{{ form_widget(form.search, {#}
        {#'attr': {'class': 'form-control search-query'}#}
    {#}) }}#}
        {#{% endfor %}#}
    {#{{ form_label(book_list.name, 'Your name') }}#}
<table width="100%" cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered table-hover table-condensed dt">
    <thead>
    <tr>
        <th>{{'Id'|trans({}, 'fields')}}</th>
        <th>{{'Title'|trans({}, 'fields')}}</th>
        <th>{{'Author'|trans({}, 'fields')}}</th>
        <th>{{'Release year'|trans({}, 'fields')}}</th>
        <th>{{'Publisher'|trans({}, 'fields')}}</th>
        <th>{{'Genre'|trans({}, 'fields')}}</th>
        <th>{{'Language'|trans({}, 'fields')}}</th>
        <th>{{'Pages number'|trans({}, 'fields')}}</th>
        <th>{{'Description'|trans({}, 'fields')}}</th>
        <th>{{'Comments count'|trans({}, 'fields')}}</th>
        <th>{{'Rating'|trans({}, 'fields')}}</th>
        <th>{{'Readers count'|trans({}, 'fields')}}</th>
        <th>{{'Last read page'|trans({}, 'fields')}}</th>
        <th>
        {% if is_granted('ROLE_USER') %}
            <a href="{{ path('book_new') }}"
               role="button" class="btn btn-xs btn-main">
                <i class="glyphicon glyphicon-plus icon-white"></i></a>
        {% endif %}
        </th>
    </tr>
    </thead>

    <tbody>
    {% for book in book_list %}
        <tr>
            <td>{{ no }}</td>
            {% set no = no + 1 %}

            <td><a href="{{ path('book_show', {'entityId': book.id}) }}">{{ book.title }}</a></td>
            <td>{{ book.author }}</td>
            <td>{{ book.releaseYear|date("m/d/Y") }}</td>
            <td>{{ book.publisher }}</td>
            <td>{{ book.genre }}</td>
            <td>{{ book.language }}</td>
            <td>{{ book.pagesNumber }}</td>
            <td>{{ book.description }}</td>
            <td>{{ book.commentsCount }}</td>
            <td>{{ book.rating }}</td>
            <td>{{ book.readersCount }}</td>
            <td>{{ book.lastReadPage }}</td>
            <td>
        {% if is_granted('ROLE_USER') %}
            {% if book.userEmail == app.user.email or is_granted('ROLE_ADMIN') %}
                <div class="btn-toolbar nomargin">
                    <div class="btn-group">
                        <a data-toggle="modal-ajax"
                           data-title="{{'Edit Book'|trans({}, 'default')}}"
                           data-callback="reloadTab"
                           data-target="#invModal"
                           href="{{ path('book_edit', {'id': book.id}) }}"
                           class="btn btn-default btn-xs"><i class="glyphicon glyphicon-pencil"></i></a>
                        <a data-record="{{ book.id }}"
                           data-msg="{{ book.title }}"
                           href="{{ path('book_delete', {'entityId': book.id}) }}"
                           data-callback="reloadTab"
                           class="btn btn-default btn-xs delete"
                            onclick="return confirm('Are you sure you want to delete this book?')"><i class="glyphicon glyphicon-remove"></i></a>
                    </div>
                </div>
            {% endif %}
            {% endif %}
            </td>
        </tr>
    {% endfor %}
    </tbody>

</table>
{% endblock %}
{#{% block javascripts %}#}
    {#<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>#}
    {#<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js">#}
{#{% endblock %}#}